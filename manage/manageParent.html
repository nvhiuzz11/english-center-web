<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Quản lý hệ thống giáo dục</title>
	<link rel="stylesheet" href="../assets/css/manage.css">
	<link rel="stylesheet" href="../assets/css/manageParent.css">
	<script src="https://code.jquery.com/jquery-3.6.4.js"></script>
	<link rel="icon" href="../assets/images/logo-web.png" type="image/x-icon">
</head>

<body>
	<header>
		<div class="logo">
			<img src="../assets/images/logo-web.png" alt="Logo">

		</div>
		<nav>
			<ul>
				<li><a href="./ListClass.php">Quản lý lớp học</a></li>
				<li><a href="../manage/manageStudent.html">Quản lý học sinh</a></li>
				<li><a href="../manage/manageTeacher.html">Quản lý giáo viên</a></li>
				<li><a style="color: #0088cc;" href="../manage/manageParent.html">Quản lý phụ huynh</a></li>
				<li><a href="../manage/manageFinance.html">Quản lý tài chính</a></li>
				<li><a href="../manage/manageStatistical.php">Báo cáo thống kê</a></li>
				<li><a href="../manage/manageCenter.html">Quản lý trung tâm</a></li>

				<li><a href="../pages/home/home.php" style="display: flex;"><img src="../assets/images/icon-logout.png"
							alt="" style="width:20px"></a></li>

			</ul>
		</nav>
	</header>
	<main>

		<h1>Quản lý Phụ huynh</h1>
		<div class="search-container">

			<form id="form-search" method="post" action=""
				style="width: 50%; margin: unset;display: inline-flex;" autocomplete="off">
				<input type="text" name="keyword" id="keyword" placeholder="Tìm kiếm..."
					style="width: 70% ; border-radius: 0px; border-color:black;" oninput="searchList()">
				<input type="button" id="search" value="Tìm kiếm" style="width: 100px;  background-color: #4CAF50;">
				<button type="submit" id="refesh-btn" name="refesh" style=" background-color: currentcolor "> <img
						style="width: 30px;" src="../assets/images/Refresh-icon.png" alt=""></button>
			</form>
			<div>
				<button class="add-parent-button">+ Thêm phụ huynh</button>
			</div>
		</div>

		<table id="table-1">
			<thead>
				<tr>
					<th>STT</th>
					<th onclick="sortTable(1)">Mã phụ huynh</th>
					<th onclick="sortTable(2)">Họ tên</th>
					<th onclick="sortTable(3)">Giới tính</th>
					<th onclick="sortTable(4)">Tuổi</th>
					<th onclick="sortTable(5)" style="width :200px">Địa chỉ</th>
					<th onclick="sortTable(6)">Phụ huynh của</th>

				</tr>
			</thead>
			<tbody class="tbody-1">




			</tbody>
		</table>
		<div id="container-index"></div>
		<!-- Thêm phụ huynh -->

		<div class="modal-bg-add">
			<div class="modal-content-add">
				<div>
					<form id="form_add" name="form_add" method="post">

						<h1>Thêm Phụ huynh</h1>

						<label for="parent_name">Tên phụ huynh: <label id="lb_name_add"
								style="color:red; font-size:13px ; font-style: italic "></label></label>
						<input type="text" id="parent_name_add" name="parent_name_add" placeholder="Nhập tên phụ huynh">

						<label for="gender">Giới tính:</label>
						<select id="gender_add" name="gender_add">
							<option value="1">Nam</option>
							<option value="2">Nữ</option>
						</select>

						<label for="birthday">Ngày sinh:</label>
						<input type="date" id="birthday_add" name="birthday_add" onchange="setAge()"><label
							id="lb_birthday_add" style="color:red; font-size:13px ; font-style: italic "></label>

						<label for="age" style="margin-left: 150px;">Tuổi:</label>
						<input type="number" id="age_add" name="age_add" readonly> <label id="lb_age_add"
							style="color:red; font-size:13px ; font-style: italic "></label>
						<br>

						<label for="address">Địa chỉ: <label id="lb_address_add"
								style="color:red; font-size:13px ; font-style: italic "></label></label>
						<input type="text" id="address_add" name="address_add" placeholder="Nhập địa chỉ">

						<label for="phone_number">Số điện thoại: <label id="lb_phone_add"
								style="color:red; font-size:13px ; font-style: italic "></label></label>
						<input type="tel" id="phone_number_add" name="phone_number_add"
							placeholder="Nhập số diện thoại">

						<label for="email_add">Email: <label id="lb_email_add"
								style="color:red; font-size:13px ; font-style: italic "></label></label>
						<input type="email" id="email_add" name="email_add" placeholder="Nhập email">


						<!-- <label for="student_add">Học sinh liên kết: <label class="lb_student_add"
								style="color:red; font-size:13px; font-style: italic;"></label></label>
						<br> -->
						<!-- <select name="student_add" class="student_add" style="width: 50%;">
							<option value="">Chọn học sinh</option>


							<?php foreach ($listStudent as $st) { ?>
								<option value="<?php echo $st['MaHS'] ?>">
									<?php echo $st['MaHS'] . '. ' . $st['TenHS'] . ' - ' . $st['Tuoi'] . ' tuổi' ?>
								</option>
							<?php } ?>

						</select> -->
						<!-- <button type="button" style="background-color: limegreen;" onclick="addStudent()"
							id="add_student">+</button>

						<div id="studentContainer" style="padding : 0px">

						</div> -->


						<input type="submit" id='add' name="add" value="Thêm">

					</form>
					<button class="cancle-btn-add" style="margin-left: 70px;">Hủy bỏ</button>
				</div>
			</div>
		</div>
		<!-- Thong tin chi tiet -->
		<div class="modal-bg">
			<div class="modal-content">


				<h2>Thông tin phụ huynh</h2>
				<button id="edit-button" style="position: absolute;top: 40px;right: 60px;">Sửa</button>

				<button id="delete-button" name="delete"
					style="position: absolute;top: 40px;right: 11px; background-color: #e90000">Xóa</button>

				<div class="container">

					<div class="header">
						<img id="img" alt="Avatar" class="avatar">

						<h1 class="name" id="Parent-name"></h1>
					</div>

					<div class="detail">

						<div class="tab">
							<button class="tablinks" id="tb1" onclick="openTab(event, 'tab1')">Chung</button>
							<button class="tablinks" id="tb2" onclick="openTab(event, 'tab2')">Học sinh liên
								kết</button>
							<button class="tablinks" id="tb3" onclick="openTab(event, 'tab3')">Tài khoản</button>
						</div>

						<div id="tab1" class="tabcontent">

							<table>
								<tr>
									<th>Mã phụ huynh:</th>
									<td id="Parent-id"></td>
								</tr>
								<tr>
									<th>Giới tính:</th>
									<td id="Parent-gender" contenteditable="false"></td>
								</tr>
								<tr>
									<th>Ngày sinh:</th>
									<td id="Parent-date" contenteditable="false"></td>
								</tr>
								<tr>
									<th>Tuổi:</th>
									<td id="Parent-age" contenteditable="false">43</td>
								</tr>

								<tr>
									<th>Địa chỉ:</th>
									<td id="Parent-address" contenteditable="false"></td>
								</tr>



								<tr>
									<th>Phụ huynh của học sinh:</th>
									<td id="Parent-parent"></td>
								</tr>

								<tr>
									<th>Số điện thoại: </th>
									<td id="Parent-phone" contenteditable="false"></td>
								</tr>

								<tr>
									<th>Email:</th>
									<td id="Parent-email" contenteditable="false"></td>
								</tr>
							</table>



						</div>





						<div id="tab2" class="tabcontent">
							<button id="add-student"
								style="float: inline-end;border-radius: 0px;  background-color: seagreen; "> Thêm liên
								kết học sinh</button>

							<div id="child-infor">


							</div>

						</div>

						<div id="tab3" class="tabcontent">
							<div>
								<table>
									<tr>
										<td id="date_logup"></td>
									</tr>
									<tr>
										<td>
											<h3 style="text-align: center;"> Tên đăng nhập : </h3>
										</td>
										<td>
											<label id="name-login"> </label>
										</td>
									</tr>
									<tr>
										<td>
											<h3 style="text-align: center;"> Mật khẩu : </h3>
										</td>
										<td>
											<input type="password" id="password" style="height: 21px;font-size: 18px;"
												readonly>
											<button style="background-color: slategray;"
												onclick="togglePassword()">Hiện/ẩn</button>
										</td>
									</tr>
									<tr>
										<td></td>
										<td>
											<button style=" background-color: peru;" id="change-pass-btn">Đổi mật
												khẩu</button>
										</td>
									</tr>
								</table>
							</div>

							<div id="div-change-pass">
								<form action="#" method="POST" id="change-pass" name="change-pass">
									<table>

										<tr>
											<td>
												<label> Tên đăng nhập : </label>
											</td>
											<td>
												<input type="text" id="username-login" name="username-login" readonly>
											</td>

										</tr>
										<tr>
											<td>
												<h5 id="err-username"
													style="color: red;font-style: italic;  font-size: 14px;"></h5>
											</td>

										</tr>
										<tr>

											<td>
												<label for="new-password">Mật khẩu mới:</label>
											</td>
											<td>
												<input type="password" id="new-password" name="new-password"
													autocomplete="false"><br>
											</td>
										</tr>
										<tr>
											<td>
												<h5 id="err-pass"
													style="color: red;font-style: italic;  font-size: 14px;"></h5>
											</td>

										</tr>


										<tr>
											<td style="text-align :center">
												<button type="button" id="cancle-change-pass"
													style=" font-size: 14px;padding: 14px 20px;">Hủy bỏ</button>
											</td>
											<td style="text-align :center">
												<input type="submit" name="change" id="change" style="width: unset"
													value="Cập nhật">
											</td>
										</tr>

									</table>
								</form>
							</div>
						</div>

					</div>


				</div>

				<button class="close-btn">Đóng</button>
			</div>
		</div>
		<div id="modal-add-link">



			<div id="add-link-student">
				<h3>Thêm liên kết học sinh</h3>
				<select name="student_add2" class="student_add2" id="select-student" style="width: 60%;" required>
					<option value="">Chọn học sinh</option>

				</select>
				<button type="button" style="background-color: limegreen;" onclick="addLinkStudent()">+</button>

				<div id="studentContainer2" style="padding : 0px ">

				</div>
				<button id="btn-cancle-link" style="width: 30%;">Hủy</button>

				<button id="btn-add-link" style="width: 30%;">Thêm</button>

			</div>
		</div>
		<!-- Sua thong tin -->
		<div class="modal-bg-edit">
			<div class="modal-content-edit">
				<div>
					<form id="form_edit" name="form_edit" method="post">

						<h1>Sửa thông tin Phụ huynh</h1>

						<h2 id="parent-id_edit"></h2>
						<input type="hidden" id="id_edit" name="id_edit">

						<label for="parent_name">Tên phụ huynh: <label id="lb_name_edit"
								style="color:red; font-size:13px ; font-style: italic "></label></label>
						<input type="text" id="parent_name_edit" name="parent_name_edit" required>

						<label for="gender">Giới tính:</label>
						<select id="gender_edit" name="gender_edit">
							<option value="1">Nam</option>
							<option value="2">Nữ</option>
						</select>

						<label for="birthday">Ngày sinh:</label>
						<input type="date" id="birthday_edit" name="birthday_edit" required onchange="setAge2()"><label
							id="lb_birthday_edit" style="color:red; font-size:13px ; font-style: italic "></label>

						<label for="age" style="margin-left: 150px;">Tuổi:</label>
						<input type="number" id="age_edit" name="age_edit" readonly>
						<br>
						<label for="address_edit">Địa chỉ: <label id="lb_address_edit"
								style="color:red; font-size:13px ; font-style: italic "></label></label>
						<input type="text" id="address_edit" name="address_edit" required>

						<label for="phone_number">Số điện thoại: <label id="lb_phone_edit"
								style="color:red; font-size:13px ; font-style: italic "></label></label>
						<input type="tel" id="phone_number_edit" name="phone_number_edit" required>

						<label for="email">Email: <label id="lb_email_edit"
								style="color:red; font-size:13px ; font-style: italic "></label></label>
						<input type="email" id="email_edit" name="email_edit" required>


						<input type="submit" id='update' name="update" value="Cập nhật">

					</form>
					<button class="cancle-btn">Hủy bỏ</button>
				</div>
			</div>
		</div>



		<!-- Thong bao -->

		<div class="add-success">
			<img src="../assets/images/icon_success.png" alt="" style=" width: 40px;">
			<h3>Thêm phụ huynh thành công!</h3>
		</div>
		<div class="add-success" id="noti-add-link">
			<img src="../assets/images/icon_success.png" alt="" style=" width: 40px;">
			<h3>Thêm liên kết thành công!</h3>
		</div>

		<div class="update-success">
			<img src="../assets/images/icon_success.png" alt="" style=" width: 40px;">
			<h3>Thay đổi thành công!</h3>
		</div>
		<div class="delete-success">
			<img src="../assets/images/icon_success.png" alt="" style=" width: 40px;">
			<h3>Xóa thành công!</h3>
		</div>
		<div id="modal-ques">
			<div class="delete-ques">
				<img src="../assets/images/Help-icon.png" alt="" style=" width: 40px;">
				<h4>Bạn chắc chắn muốn xóa?</h4>
				<div style="display:flex ;justify-content: space-evenly;align-items: center">

					<input type="submit" style="background-color:#52a95f; height: 44px;width: 80px" id="delete-cancle"
						value="Hủy bỏ"></input>
					<input type="submit" style="background-color: #d52828;  height: 44px;width: 80px" id="delete"
						value="Xóa"></input>

				</div>
			</div>


			<div class="delete-ques2" style="max-width: 333px;">
				<img src="../assets/images/Help-icon.png" alt="" style=" width: 40px;">
				<h4>Phụ huynh đã có nhiều dữ liệu liên quan. Việc xóa sẽ ảnh hưởng đến cơ sở dữ liệu. <br> Bạn chắc chắn
					muốn xóa?</h4>
				<div style="display:flex ;justify-content: space-evenly;align-items: center">

					<input type="submit" style="background-color:#52a95f; height: 44px;width: 80px" id="delete-cancle2"
						value="Hủy bỏ"></input>
					<input type="submit" style="background-color: #d52828;  height: 44px;width: 80px" id="delete2"
						value="Xóa"></input>

				</div>
			</div>

		</div>

		<div class="change-pass-success">
			<img src="../assets/images/icon_success.png" alt="" style=" width: 40px;">
			<h3>Thay đổi mật khẩu thành công!</h3>
		</div>

		<div id="modal-ques-link">
			<div class="delete-ques-link">
				<img src="../assets/images/Help-icon.png" alt="" style=" width: 40px;">
				<h4 id="txt-quest-link">Bạn chắc chắn muốn xóa?</h4>
				<div style="display:flex ;justify-content: space-evenly;align-items: center">
					<input type="submit" style="background-color:#52a95f; height: 44px;width: 80px"
						id="delete-cancle-link" value="Hủy bỏ"></input>
					<input type="submit" style="background-color: #d52828;  height: 44px;width: 80px" id="delete-link"
						value="Xóa"></input>

				</div>
			</div>
		</div>
		<!-- <p style="margin-left: 80%; font-style:italic; font-size:13px"> <?php echo '*Tổng số phụ huynh: ' . $i - 1 . '  Nam: ' . $nam . '  Nữ: ' . $nu ?> </p> -->

	</main>

	<!-- Spinner overlay -->
	<div id="loadingSpinner" class="spinner-overlay">
		<div class="spinner"></div>
	</div>


	<footer>
		<p>© 2023 Hệ thống quản lý giáo dục. All rights reserved.</p>
	</footer>
</body>
<script src="../../assets/js/api.js"></script>

<script>
	//var ds_phuhuynh;
	// ds_hocsinh = <?php print_r($jsonListStudent); ?>;
	// ds_phuhuynh = <?php print_r($jsonListParent); ?>;
	// ds_hs_of_ph = <?php print_r($jsonListph_hs); ?>;
	// ds_hs_lop = <?php print_r($jsonLisths_lop); ?>;
	// ds_tk_ph = <?php print_r($jsonListtk_ph); ?>;
</script>
<script src="../../assets/js/manageParent.js"></script>

</html>